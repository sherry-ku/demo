<!DOCTYPE html>

<html class="readonly" lang="zh-TW">

<head>
  <meta charset="utf-8" />
  <title>工務與工單 - 客戶資料查詢結果</title>
  <link href="common.css" rel="stylesheet" />
</head>

<body class="detail-page">
  <div class="header">
    <div class="header-left">
      <div>登入者：005566 陳小華</div>
      <div>登入角色：客服人員</div>
      <div>公司別：116 中嘉數位</div>
      <div>登入時間：18:44:11</div>
    </div>
    <div class="header-right">
      <button class="btn">訊息中心</button>
      <button class="btn">暫存訂單</button>
      <button class="btn">登出</button>
    </div>
  </div>
  <div class="main">
    <!-- 側邊選單 (Sidebar) -->
    <div class="sidebar" id="sidebar"></div>

    <div class="content">
      <div id="customerInfoHeaderContainer"></div>
      <!-- 第一層 Tab -->
      <div>
        <div class="tabs" id="mainTabs">
          <div class="tab">
            <a href="detail-customer.html" style="text-decoration: none; color: inherit;">客戶與大樓資料</a>
          </div>
          <div class="tab">
            <a href="detail-product.html" style="text-decoration: none; color: inherit;">產品與申辦歷程</a>
          </div>
          <div class="tab">
            <a href="detail-billing.html" style="text-decoration: none; color: inherit;">帳務與發票</a>
          </div>
          <div class="tab active">
            <a href="detail-engineering.html" style="text-decoration: none; color: inherit;">工單與設備</a>
          </div>
          <div class="tab">
            <a href="detail-contact.html" style="text-decoration: none; color: inherit;">客戶聯絡歷程</a>
          </div>
        </div>
      </div>

      <!-- 工務與工單 Tab Content -->
      <div class="main-tab-content" id="main4">

        <!-- 工務與設備子選單 -->
        <div class="sub-tabs">
          <div class="sub-tab" data-content="networkInfo">網點資訊</div>
          <div class="sub-tab" data-content="workOrder">派工紀錄</div>
          <div class="sub-tab" data-content="relocation">移機紀錄</div>
          <div class="sub-tab active" data-content="networkSettings">目前網路設定</div>
          <div class="sub-tab" data-content="outage">斷訊紀錄</div>
        </div>

        <!-- 網點資訊內容 -->
        <div id="networkInfoContent" style="display: none;">
          <div class="section">
            <div class="section-title">網點資訊</div>
            <p>網點資訊內容待開發...</p>
          </div>
        </div>

        <!-- 派工紀錄內容 -->
        <div id="workOrderContent" style="display: none;">
          <!-- 查詢條件區 -->
          <div class="section search-bar">
            <div class="section-title">派工紀錄查詢</div>
            <div class="form-row">
              <div class="form-group">
                <label>預約日期</label>
                <input type="date" class="form-control" />
              </div>
              <div class="form-group">
                <label>～</label>
                <input type="date" class="form-control" />
              </div>
              <div class="form-group">
                <label>工單狀態</label>
                <select class="form-control">
                  <option>請選擇</option>
                  <option>待派工</option>
                  <option>已派工</option>
                  <option>施工中</option>
                  <option>已完成</option>
                </select>
              </div>
              <div class="form-group">
                <label>工單編號</label>
                <input type="text" placeholder="請輸入" class="form-control" />
              </div>
              <div class="form-group">
                <label>工單類別</label>
                <select class="form-control">
                  <option>請選擇</option>
                  <option>新裝</option>
                  <option>維修</option>
                  <option>移機</option>
                </select>
              </div>
              <div class="form-group">
                <label>施工項目</label>
                <select class="form-control">
                  <option>請選擇</option>
                </select>
              </div>
            </div>
            <div class="form-actions" style="text-align: right;">
              <button class="btn btn-secondary">清除</button>
              <button class="btn btn-primary">查詢</button>
            </div>
          </div>

          <!-- 工單列表 -->
          <div class="section">
            <div class="section-title">派工紀錄列表</div>
            <div class="table-container">
              <table class="table">
                <thead>
                  <tr>
                    <th>工單狀態</th>
                    <th>工單編號</th>
                    <th>工單類別</th>
                    <th>施工項目</th>
                    <th>預約日期</th>
                    <th>完工日期</th>
                    <th>工程師</th>
                    <th>主要聯絡人</th>
                    <th>次要聯絡人</th>
                    <th>退單原因</th>
                    <th>查看</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="badge badge-green">完工</span></td>
                    <td>WO-20250518-001</td>
                    <td>新申裝</td>
                    <td>Internet+CATV新裝</td>
                    <td>2025-05-05</td>
                    <td>2025-05-18</td>
                    <td>6543 陳工程<br><small>0912345678</small></td>
                    <td>Jacy (女兒)<br><small>0939-123-123</small></td>
                    <td>Mike (兒子)<br><small>0939-755-123</small></td>
                    <td>-</td>
                    <td><button class="btn-view" onclick="toggleWorkOrderDetail('row1')">查看</button></td>
                  </tr>
                  <!-- 展開的詳情區域 -->
                  <tr id="detail-row1" class="detail-row" style="display: none;">
                    <td colspan="11">
                      <div class="work-order-detail-panel">
                        <h4>施工明細 - WO-20250518-001</h4>

                        <!-- 簡化的明細表 -->
                        <div class="table-container">
                          <table class="table detail-table">
                            <thead>
                              <tr>
                                <th colspan="5">設備安裝明細</th>
                                <th colspan="4">收費明細</th>
                              </tr>
                              <tr>
                                <th>設備編號</th>
                                <th>設備名稱</th>
                                <th>型號</th>
                                <th>安裝位置</th>
                                <th>設備狀態</th>
                                <th>收費項目</th>
                                <th>單價</th>
                                <th>數量</th>
                                <th>小計</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>D20250518001</td>
                                <td>數位機上盒</td>
                                <td>DEV-CM600</td>
                                <td>客廳</td>
                                <td>正常運作</td>
                                <td>安裝費</td>
                                <td>500</td>
                                <td>1</td>
                                <td>500</td>
                              </tr>
                              <tr>
                                <td>D20250518002</td>
                                <td>數位機上盒</td>
                                <td>DEV-TV147</td>
                                <td>臥房</td>
                                <td>正常運作</td>
                                <td>設備押金</td>
                                <td>1000</td>
                                <td>2</td>
                                <td>2000</td>
                              </tr>
                              <tr>
                                <td>DEV-I968</td>
                                <td>ATV設備</td>
                                <td>ATV機上盒</td>
                                <td>客廳</td>
                                <td>正常運作</td>
                                <td>材料費</td>
                                <td>200</td>
                                <td>1</td>
                                <td>200</td>
                              </tr>
                              <tr>
                                <td>DEV-C999</td>
                                <td>纜線數據機</td>
                                <td>CM600</td>
                                <td>客廳</td>
                                <td>正常運作</td>
                                <td>工程費</td>
                                <td>300</td>
                                <td>1</td>
                                <td>300</td>
                              </tr>
                              <tr style="background: #f8f9fa; font-weight: bold;">
                                <td colspan="5">備註：裝機順利完成，客戶滿意度 ★★★★★</td>
                                <td colspan="3" style="text-align: right;">總計金額：</td>
                                <td style="color: #1976d2;">NT$ 3,000</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>

                        <!-- 額外資訊 -->
                        <div class="work-summary" style="margin-top: 15px;">
                          <div class="form-grid" style="grid-template-columns: repeat(4, 1fr); gap: 15px;">
                            <div class="form-item">
                              <div class="form-label">建立日期</div>
                              <div class="form-value">2025/05/01</div>
                            </div>
                            <div class="form-item">
                              <div class="form-label">實際開工</div>
                              <div class="form-value">2025/05/05</div>
                            </div>
                            <div class="form-item">
                              <div class="form-label">保固到期</div>
                              <div class="form-value">2026/05/18</div>
                            </div>
                            <div class="form-item">
                              <div class="form-label">市話</div>
                              <div class="form-value">02-12341234</div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </td>
                  </tr>

                  <!-- 第二筆工單 -->
                  <tr>
                    <td><span class="badge badge-orange">已派工</span></td>
                    <td>WO-20250815-002</td>
                    <td>維修</td>
                    <td>網路訊號不穩定</td>
                    <td>2025-08-16</td>
                    <td>-</td>
                    <td>7890 王工程<br><small>0987654321</small></td>
                    <td>張太太 (本人)<br><small>0921-888-999</small></td>
                    <td>-</td>
                    <td>-</td>
                    <td><button class="btn-view" onclick="toggleWorkOrderDetail('row2')">查看</button></td>
                  </tr>
                  <!-- 第二筆的詳情區域 -->
                  <tr id="detail-row2" class="detail-row" style="display: none;">
                    <td colspan="11">
                      <div class="work-order-detail-panel">
                        <h4>施工明細 - WO-20250815-002</h4>
                        <p style="color: #666; text-align: center; padding: 20px;">
                          此工單尚在進行中，詳細資訊將在完工後更新...
                        </p>
                      </div>
                    </td>
                  </tr>

                </tbody>
              </table>
            </div>
          </div>

          <!-- 移機紀錄內容 -->
          <div id="relocationContent" style="display: none;">
            <div class="section">
              <div class="section-title">移機紀錄</div>
              <p>移機紀錄內容待開發...</p>
            </div>
          </div>







          <div id="outageContent" style="display: none;">
            <div class="section search-bar">
              <div class="section-title">斷訊紀錄查詢</div>
              <div class="form-row">
                <div class="form-group">
                  <label>斷訊日期範圍</label>
                  <input type="date" value="2025-01-01" class="form-control" />
                </div>
                <div class="form-group">
                  <label>至</label>
                  <input type="date" value="2025-12-31" class="form-control" />
                </div>
                <div class="form-group">
                  <label>故障狀態</label>
                  <select class="form-control">
                    <option>全部</option>
                    <option>待處理</option>
                    <option>已結案</option>
                  </select>
                </div>
              </div>
              <div class="form-actions" style="text-align: right;">
                <button class="btn btn-secondary">清除</button>
                <button class="btn btn-primary">查詢</button>
              </div>
            </div>

            <div class="section">
              <div class="section-title">斷訊事件記錄</div>
              <div class="table-container">
                <table class="table">
                  <thead>
                    <tr>
                      <th style="width: 50px;">序號</th>
                      <th style="width: 80px;">狀態</th>
                      <th style="width: 130px;">故障發生時間</th>
                      <th style="width: 200px;">故障原因</th>
                      <th style="width: 150px;">說明</th>
                      <th style="width: 130px;">公佈故障訊息</th>
                      <th style="width: 130px;">預定修復時間</th>
                      <th style="width: 100px;">通報時間</th>
                      <th style="width: 100px;">恢復時間</th>
                      <th style="width: 60px;">結案</th>
                      <th colspan="4" style="width: 200px;">影響服務</th>
                    </tr>
                    <tr style="background: #e9ecef;">
                      <th colspan="10"></th>
                      <th style="width: 50px;">CATV</th>
                      <th style="width: 50px;">CM</th>
                      <th style="width: 50px;">FTTH</th>
                      <th style="width: 50px;">OTT</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td><span class="badge badge-orange">待處理</span></td>
                      <td>2025/5/1 15:00</td>
                      <td>XXX路台YYY故障導致網路中斷</td>
                      <td>影響ZZZ區域服務</td>
                      <td>2025/5/1 20:00</td>
                      <td>-</td>
                      <td>-</td>
                      <td>2025/7/1 12:00</td>
                      <td>-</td>
                      <td><input type="checkbox" disabled></td>
                      <td><input type="checkbox" disabled></td>
                      <td><input type="checkbox" checked disabled></td>
                      <td><input type="checkbox" disabled></td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td><span class="badge badge-green">已結案</span></td>
                      <td>2025/7/1 15:00</td>
                      <td>Netflix服務故障</td>
                      <td>串流服務異常</td>
                      <td>2025/7/1 20:00</td>
                      <td>-</td>
                      <td>-</td>
                      <td>2025/7/1 12:00</td>
                      <td>✓</td>
                      <td><input type="checkbox" disabled></td>
                      <td><input type="checkbox" checked disabled></td>
                      <td><input type="checkbox" disabled></td>
                      <td><input type="checkbox" disabled></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <!-- 目前網路設定內容區塊 -->
          <div id="networkSettingsContent" style="display: none;">
            <!-- 網路設定 -->
            <div class="section">
              <div class="section-title">網路設定</div>
              <div class="form-grid" style="grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="form-item">
                  <div class="form-label">動態IP數</div>
                  <div class="form-value">DNS</div>
                </div>
                <div class="form-item">
                  <div class="form-label">固定IP數</div>
                  <div class="form-value">子網遮罩</div>
                </div>
                <div class="form-item">
                  <div class="form-label">固定IP/nn</div>
                  <div class="form-value">預設閘道</div>
                </div>
                <div class="form-item">
                  <div class="form-label">需固定IP</div>
                  <div class="form-value"></div>
                </div>
              </div>
            </div>

            <!-- 網路連線資訊 -->
            <div class="section">
              <div class="section-title">網路連線資訊</div>
              <div class="form-grid" style="grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="form-item">
                  <div class="form-label">下行頻寬</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label">上行頻寬</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label">接接條號</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label">接接密碼</div>
                  <div class="form-value"></div>
                </div>
              </div>
            </div>

            <!-- 設備設定 -->
            <div class="section">
              <div class="section-title">設備設定</div>
              <div class="form-grid" style="grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="form-item">
                  <div class="form-label">設備廠牌</div>
                  <div class="form-value">Switch ID</div>
                </div>
                <div class="form-item">
                  <div class="form-label">網卡mac</div>
                  <div class="form-value">Switch埠</div>
                </div>
                <div class="form-item">
                  <div class="form-label">網卡白碼</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label"></div>
                  <div class="form-value"></div>
                </div>
              </div>
            </div>

            <!-- 軟體資訊 -->
            <div class="section">
              <div class="section-title">軟體資訊</div>
              <div class="form-grid" style="grid-template-columns: repeat(4, 1fr); gap: 15px;">
                <div class="form-item">
                  <div class="form-label">作業系統</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label">郵件軟體</div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label"></div>
                  <div class="form-value"></div>
                </div>
                <div class="form-item">
                  <div class="form-label"></div>
                  <div class="form-value"></div>
                </div>
              </div>
            </div>
          </div>

          <script src="customerInfoHeader.js"></script>
          <script src="sidebar.js"></script>
          <script>
            document.getElementById('customerInfoHeaderContainer').innerHTML = customerInfoHeaderHTML;
            document.getElementById('sidebar').innerHTML = sidebarHTML;


            // ★ 頁面專屬：預設收合（避免影響其他頁）
            (function () {
              // 確保元素已注入且目前為展開狀態，再呼叫一次 toggle 讓它收合
              const content = document.getElementById('customerInfoContent');
              if (typeof toggleCustomerInfo === 'function' && content && !content.classList.contains('collapsed')) {
                toggleCustomerInfo(); // 變成收合，icon 也會切成 ▶
              }
            })();

          </script>

          <script>
            document.addEventListener('DOMContentLoaded', function () {
              // 子選單切換功能
              const subTabs = document.querySelectorAll('.sub-tab');
              const contentSections = {
                'networkInfo': document.getElementById('networkInfoContent'),
                'workOrder': document.getElementById('workOrderContent'),
                'relocation': document.getElementById('relocationContent'),
                'networkSettings': document.getElementById('networkSettingsContent'),
                'outage': document.getElementById('outageContent')
              };

              // 初始化：顯示預設選中的內容
              showContent('workOrder');

              // 為每個子選單添加點擊事件
              subTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                  // 移除所有 active 狀態
                  subTabs.forEach(t => t.classList.remove('active'));

                  // 為點擊的選單添加 active 狀態
                  this.classList.add('active');

                  // 顯示對應內容
                  const contentType = this.getAttribute('data-content');
                  showContent(contentType);
                });
              });

              // 顯示指定內容的函數
              function showContent(contentType) {
                // 隱藏所有內容區塊
                Object.values(contentSections).forEach(section => {
                  if (section) {
                    section.style.display = 'none';
                  }
                });

                // 顯示指定的內容區塊
                if (contentSections[contentType]) {
                  contentSections[contentType].style.display = 'block';
                }
              }
            });

            // 工單詳情展開/收合
            function toggleWorkOrderDetail(rowId) {
              const detailRow = document.getElementById('detail-' + rowId);
              const button = event.target;

              if (detailRow.style.display === 'none' || detailRow.style.display === '') {
                // 展開
                detailRow.style.display = 'table-row';
                button.textContent = '收合';
                button.classList.add('active');
              } else {
                // 收合
                detailRow.style.display = 'none';
                button.textContent = '查看';
                button.classList.remove('active');
              }
            }

            // 迷你標籤頁切換
            document.addEventListener('DOMContentLoaded', function () {
              document.addEventListener('click', function (e) {
                if (e.target.classList.contains('detail-mini-tab')) {
                  const target = e.target.getAttribute('data-target');
                  const container = e.target.closest('.detail-tabs-container');

                  // 移除所有活動狀態
                  container.querySelectorAll('.detail-mini-tab').forEach(tab => tab.classList.remove('active'));
                  container.querySelectorAll('.detail-tab-content').forEach(content => content.classList.remove('active'));

                  // 設置新的活動狀態
                  e.target.classList.add('active');
                  document.getElementById(target).classList.add('active');
                }
              });
            });
          </script>

</body>

</html>